<div class="max-w-5xl mx-auto py-10 px-4">
  <header class="text-center mb-10">
    <h2 class="text-3xl font-bold tracking-tight mb-1">🏋️ Exercise Tracker</h2>
    <p class="text-gray-600 text-lg">Log your exercises &amp; track burned calories.</p>
  </header>

  <section class="bg-white rounded-2xl shadow p-8 mb-10">
    <form class="flex flex-wrap gap-6 items-end" (ngSubmit)="logExercise()" novalidate>
      <div class="flex flex-col gap-1 min-w-[180px] flex-1">
        <label for="exercise" class="font-semibold text-gray-800">Exercise</label>
        <select
          id="exercise"
          name="exercise"
          [(ngModel)]="selectedExercise"
          required
          class="px-4 py-3 border border-gray-300 rounded-lg text-base bg-gray-50 focus:border-green-600 focus:outline-none"
        >
          <option [ngValue]="null" disabled>Select Exercise</option>
          <option *ngFor="let e of exercisesList" [ngValue]="e">
            {{ e.name }}
          </option>
        </select>
      </div>

      <div class="flex flex-col gap-1 min-w-[180px] flex-1">
        <label for="duration" class="font-semibold text-gray-800">Duration</label>
        <select
          id="duration"
          name="duration"
          [(ngModel)]="duration"
          required
          class="px-4 py-3 border border-gray-300 rounded-lg text-base bg-gray-50 focus:border-green-600 focus:outline-none"
        >
          <option [ngValue]="null" disabled>Duration</option>
          <option *ngFor="let d of durationsList" [ngValue]="d">
            {{ d }} minutes
          </option>
        </select>
      </div>

      <button
        type="submit"
        [disabled]="!selectedExercise || !duration"
        [attr.aria-disabled]="(!selectedExercise || !duration).toString()"
        class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-full px-6 py-3 font-semibold text-base shadow hover:from-green-600 hover:to-green-700 disabled:opacity-60 disabled:cursor-not-allowed transition"
      >
        {{ editingIndex !== null ? "✏️ Update Exercise" : "➕ Log Exercise" }}
      </button>
    </form>

    <div
      class="mt-5 text-center text-lg text-gray-800"
      *ngIf="selectedExercise && duration"
      aria-live="polite"
    >
      <p>
        🔥 <strong>{{ calculatedCalories }}</strong> kcal burned for
        <strong>{{ duration }}</strong> min of
        <strong>{{ selectedExercise.name }}</strong>
      </p>
    </div>
  </section>

  <section *ngIf="loggedExercises.length > 0">
    <h3 class="flex items-center text-2xl font-bold mb-6">
      <span class="text-2xl mr-2">📋</span> Logged Exercises
    </h3>

    <div class="mb-10">
      <div
        *ngFor="let ex of loggedExercises; let i = index"
        class="flex justify-between items-center bg-white rounded-2xl shadow p-6 mb-6 flex-wrap sm:flex-nowrap"
      >
        <div>
          <div class="text-lg font-bold mb-1">{{ ex.name }}</div>
          <div class="text-gray-600">{{ ex.duration }} min &bull; {{ ex.calories }} kcal</div>
        </div>
        <div class="flex gap-4 mt-3 sm:mt-0">
          <button
            (click)="editExercise(i)"
            [attr.aria-label]="'Edit ' + ex.name"
            class="text-orange-600 hover:text-orange-700 transition"
          >
            ✏️
          </button>
          <button
            (click)="removeExercise(i)"
            [attr.aria-label]="'Remove ' + ex.name"
            class="text-red-600 hover:text-red-700 transition"
          >
            ❌
          </button>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-2xl shadow p-8">
      <h4 class="flex items-center text-xl font-bold mb-6">
        <span class="mr-2">✅</span> Totals
      </h4>
      <div class="flex gap-6 flex-wrap">
        <div class="bg-gray-50 rounded-xl shadow-sm px-8 py-6 flex-1 text-center">
          <div class="text-gray-500 text-lg mb-1">Total Time</div>
          <div class="text-xl font-bold">{{ totalTime }} minutes</div>
        </div>
        <div class="bg-gray-50 rounded-xl shadow-sm px-8 py-6 flex-1 text-center">
          <div class="text-gray-500 text-lg mb-1">Total Calories Burned</div>
          <div class="text-xl font-bold">{{ totalCalories }} kcal</div>
        </div>
      </div>
    </div>
  </section>
</div>
