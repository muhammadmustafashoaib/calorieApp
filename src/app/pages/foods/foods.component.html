<div class="max-w-5xl mx-auto my-10 px-6 py-8 bg-white rounded-3xl shadow-2xl font-sans animate-fade-in space-y-8">
  <h2 class="text-4xl font-extrabold text-center text-gray-800 tracking-tight">ü•ó Food Library</h2>

  <!-- Search -->
  <div class="flex justify-center">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="üîç Search for a food‚Ä¶"
      class="w-full sm:max-w-md px-5 py-3 text-sm border border-gray-300 rounded-full shadow-inner focus:outline-none focus:ring-2 focus:ring-green-300 focus:border-green-400 transition placeholder:text-gray-400"
    />
  </div>

  <!-- Food Listings -->
  <div class="space-y-8">

    <ng-container *ngIf="searchTerm; else categorizedView">
      <div>
        <h3 class="text-lg font-semibold text-gray-700 border-l-4 border-green-500 pl-3 mb-3">üîç Search Results</h3>

        <table *ngIf="filteredFoods.length > 0; else noResults" class="w-full text-sm text-left border-collapse">
          <thead class="bg-gray-50 sticky top-0 z-10 shadow-sm">
            <tr class="text-gray-700">
              <th class="px-4 py-3 font-semibold">Food</th>
              <th class="px-4 py-3 font-semibold">Calories</th>
              <th class="px-4 py-3 font-semibold">Carbs</th>
              <th class="px-4 py-3 font-semibold">Protein</th>
              <th class="px-4 py-3 font-semibold">Fat</th>
              <th class="px-4 py-3 font-semibold">Fiber</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let food of filteredFoods" class="hover:bg-green-50 transition duration-200">
              <td class="px-4 py-2 text-gray-700">{{ food.name }}</td>
              <td class="px-4 py-2 text-gray-700">{{ food.calories }} kcal</td>
              <td class="px-4 py-2 text-gray-700">{{ food.carbs }} g</td>
              <td class="px-4 py-2 text-gray-700">{{ food.protein }} g</td>
              <td class="px-4 py-2 text-gray-700">{{ food.fat }} g</td>
              <td class="px-4 py-2 text-gray-700">{{ food.fiber }} g</td>
            </tr>
          </tbody>
        </table>

        <ng-template #noResults>
          <p class="text-center text-gray-400 italic mt-4 animate-pulse">No matching food found.</p>
        </ng-template>
      </div>
    </ng-container>

    <!-- Categorized View -->
    <ng-template #categorizedView>
      <div *ngFor="let category of categories" class="bg-gray-50 rounded-2xl p-4 shadow-inner">
        <h3 class="text-xl font-semibold text-gray-800 flex items-center gap-2 mb-4">
          <span class="text-2xl">{{ category.icon }}</span> {{ category.name }}
        </h3>
        <div class="overflow-x-auto rounded-lg">
          <table class="w-full text-sm text-left border-collapse">
            <thead class="bg-gray-100 sticky top-0 z-10">
              <tr>
                <th class="px-4 py-3 font-semibold text-gray-700">Food</th>
                <th class="px-4 py-3 font-semibold text-gray-700">Calories</th>
                <th class="px-4 py-3 font-semibold text-gray-700">Carbs</th>
                <th class="px-4 py-3 font-semibold text-gray-700">Protein</th>
                <th class="px-4 py-3 font-semibold text-gray-700">Fat</th>
                <th class="px-4 py-3 font-semibold text-gray-700">Fiber</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let food of category.items" class="hover:bg-green-50 transition">
                <td class="px-4 py-2 text-gray-700">{{ food.name }}</td>
                <td class="px-4 py-2 text-gray-700">{{ food.calories }} kcal</td>
                <td class="px-4 py-2 text-gray-700">{{ food.carbs }} g</td>
                <td class="px-4 py-2 text-gray-700">{{ food.protein }} g</td>
                <td class="px-4 py-2 text-gray-700">{{ food.fat }} g</td>
                <td class="px-4 py-2 text-gray-700">{{ food.fiber }} g</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </ng-template>

  </div>
</div>
