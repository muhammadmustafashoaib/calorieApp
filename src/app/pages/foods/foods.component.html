<div class="foods-container">
  <h2>ü•ó Food Library</h2>

  <input
    type="text"
    [(ngModel)]="searchTerm"
    placeholder="üîç Search for a food‚Ä¶"
    class="search-input"
  />

  <div class="table-wrapper">
    <ng-container *ngIf="searchTerm; else categorizedView">
      <h3>üîç Search Results</h3>

      <table *ngIf="filteredFoods.length > 0; else noResults">
        <thead>
          <tr>
            <th>Food</th>
            <th>Calories</th>
            <th>Carbs</th>
            <th>Protein</th>
            <th>Fat</th>
            <th>Fiber</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let food of filteredFoods">
            <td>{{ food.name }}</td>
            <td>{{ food.calories }} kcal</td>
            <td>{{ food.carbs }} g</td>
            <td>{{ food.protein }} g</td>
            <td>{{ food.fat }} g</td>
            <td>{{ food.fiber }} g</td>
          </tr>
        </tbody>
      </table>

      <ng-template #noResults>
        <p style="text-align: center; color: #888;">No matching food found.</p>
      </ng-template>
    </ng-container>

    <ng-template #categorizedView>
      <ng-container *ngFor="let category of categories">
        <h3>{{ category.icon }} {{ category.name }}</h3>
        <table>
          <thead>
            <tr>
              <th>Food</th>
              <th>Calories</th>
              <th>Carbs</th>
              <th>Protein</th>
              <th>Fat</th>
              <th>Fiber</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let food of category.items">
              <td>{{ food.name }}</td>
              <td>{{ food.calories }} kcal</td>
              <td>{{ food.carbs }} g</td>
              <td>{{ food.protein }} g</td>
              <td>{{ food.fat }} g</td>
              <td>{{ food.fiber }} g</td>
            </tr>
          </tbody>
        </table>
      </ng-container>
    </ng-template>
  </div>
</div>
