<div class="diary-container">
  <h2>üçΩÔ∏è Food Diary</h2>

  <!-- Date Picker -->
  <div class="date-select">
    <label for="date">üìÖ Select Date:</label>
    <input id="date" type="date" [(ngModel)]="selectedDate" (change)="onDateChange()">
  </div>

  <!-- Food Dropdown + Search Button -->
  <div class="food-select">
    <select [(ngModel)]="selectedFoodName">
      <option value="" disabled selected>Select a food</option>
      <option *ngFor="let food of foodOptions" [value]="food.name">{{ food.name }}</option>
    </select>
    <button (click)="searchFood()" style="background-color: rgb(49, 206, 49); border-radius:30%;">Enter</button>
  </div>

  <!-- Selected Food Info -->
  <div class="food-details" *ngIf="selectedFood">
    <p><strong>Calories:</strong> {{ selectedFood.calories }} kcal</p>
    <p><strong>Carbs:</strong> {{ selectedFood.carbs }} g</p>
    <p><strong>Protein:</strong> {{ selectedFood.protein }} g</p>
    <p><strong>Fat:</strong> {{ selectedFood.fat.toFixed(2) }} g</p>
    <p><strong>Fiber:</strong> {{ selectedFood.fiber }} g</p>
    <button class="add-btn" (click)="addSelectedFood()">‚ûï Add to Diary</button>
  </div>

  <!-- Table -->
  <div class="diary-table" *ngIf="foodEntries.length > 0">
    <table>
      <thead>
        <tr>
          <th>Food</th>
          <th>Calories</th>
          <th>Carbs</th>
          <th>Protein</th>
          <th>Fat</th>
          <th>Fiber</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let food of foodEntries; let i = index">
          <td>{{ food.name }}</td>
          <td>{{ food.calories }}</td>
          <td>{{ food.carbs }}</td>
          <td>{{ food.protein }}</td>
          <td>{{ food.fat.toFixed(2) }}</td>
          <td>{{ food.fiber }}</td>
          <td><button class="remove-btn" (click)="removeFood(i)">Remove</button></td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="total-row">
          <td>Total</td>
          <td>{{ getTotal('calories') }}</td>
          <td>{{ getTotal('carbs') }}</td>
          <td>{{ getTotal('protein') }}</td>
          <td>{{ getTotal('fat').toFixed(2) }}</td>
          <td>{{ getTotal('fiber') }}</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- Chart -->
  <div class="chart-wrapper" *ngIf="foodEntries.length > 0">
    <canvas baseChart
            [data]="chartData"
            [type]="chartType"
            [options]="chartOptions">
    </canvas>
  </div>
</div>
